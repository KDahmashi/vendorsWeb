var myApp=myApp||{};

function validateEmail(email) {
    var pattern = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    return pattern.test($.trim(email));		 
}
function populateDropdown(name, json){    	
    var ddl=$(name), option="";            
    ddl.empty();
    option = "<option value='0'>Select</option>";           
    $.each( json, function( id, val ) {
    	option = option + "<option value='"+id + "'>"+val + "</option>";
  	  });       
    ddl.append(option);  
}

myApp.check={
	IsDefined:function(d,v){return typeof d==="undefined"?v:d},
	IsTopWindow:function(){if(window.top!=window.self)window.top.location='../'}
}
myApp.colorbox={
	close:function(){self.parent.myApp.colorbox.closeMe();return false},
	closeMe:function(){$.fn.colorbox.close()},
	bind:function(o,w,h){$(o).colorbox({width:w,height:h,inline:true,transition:'elastic',speed:500,overlayClose:false,close:'Open',closeButton:true})},
	inline:function(plh,w,h){$.colorbox({href:plh,width:w,height:h,inline:true,transition:'elastic',speed:500,overlayClose:false,close:'Open',closeButton:true})},
	init:function(){
		var WideScreen=$('body').innerWidth()>1400;
		$('.colorbox').each(function(i){var w="80%";var h="80%";var nw=$(this).urlParam('w');var nh=$(this).urlParam('h');if(nw!=null)w=nw;if(nh!=null)h=nh;$(this).colorbox({width:w,height:h,iframe:true,transition:'elastic',speed:500,overlayClose:false,close:'Open',closeButton:false,onComplete:function(){$('#cboxClose').hide()}})});
		$('.colorboxfluid').each(function(i){var w="99%";var h="99%";var nw=$(this).urlParam('w');var nh=$(this).urlParam('h');if(nw!=null)w=nw;if(nh!=null)h=nh;if(WideScreen)w='1350px';$(this).colorbox({width:w,height:h,iframe:true,transition:'elastic',speed:500,overlayClose:false,close:'Open',closeButton:true})})
		$('.colorboxinline').each(function(i){$(this).colorbox({inline:true,width:'99%',height:'90%',transition:'elastic',speed:500,overlayClose:false,close:'Open',closeButton:true})})
	}
}
myApp.forms={
	selectTxt:function(o){return $(o+' :selected').text()},
	selectVal:function(o){return $(o+' :selected').val()},
	selectSet:function(o,v){$(o).val(v)},
	gHidden:function(id,defaultValue){if(!$('input#hdn'+id).length)myApp.forms.sHidden(id,defaultValue);return $('input#hdn'+id).val()},
	sHidden:function(id,defaultValue){if(!$('input#hdn'+id).length)$('body').append('<input type="hidden" id="hdn'+id+'"/>');$('input#hdn'+id).val(defaultValue)},
	validateOptions:{
            errorClass:'has-error',validClass:'has-success',
            highlight:function(element,errorClass,validClass){var e=$(element);e.closest(".form-group").addClass(errorClass).removeClass(validClass);var p=e.parent();p.find('span').remove();p.append('<span class="glyphicon glyphicon-remove  form-control-feedback" aria-hidden="true"></span>')},
            unhighlight:function(element,errorClass,validClass){var e=$(element);e.closest(".form-group").removeClass(errorClass).addClass(validClass);var p=e.parent();p.find('span').remove();p.append('<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>')},
			errorPlacement:function(error,element){element.parent().next().append(error)}
	  }
}
myApp.locale={
	g:function(ar,en){return gUILang()=='en'?en:ar}
}
myApp.ajax={
	Exec:function(u,p,fnOk,fnErr,method){$.ajax({type:myApp.check.IsDefined(method,'POST'),url:u,data:p,contentType:"application/json; charset=utf-8",dataType:"json",success:fnOk,error:fnErr})},
	Err:function(r){$.jGrowl(r.status+' '+r.statusText)}
}
myApp.tables={
	sum:function(tableid,colIndex){var Total=0;$(tableid+' tr td:nth-child('+colIndex+')').each(function(){Total+=+$(this).text()});return Total},
	add:function(r,id){var tbl='<table id="'+id+'"><tbody><tr><th>Title</th><th>Items</th></tr>';for(var i=0;i<r.length;i++){tbl+='<tr class="tr'+r[i].Id+'"><th>'+r[i].Title+'</th><td>'+r[i].Total+'</td></tr>'}myApp.dom.addHidden(id,tbl+'</tbody></table>')},
	addMultiCol:function(r,id,cols){
		var tbl='';var Cols=cols.split(',');var th='';var tr='';
		for(var i=0;i<Cols.length;i++)th+='<th>'+Cols[i]+'</th>';tbl+='<tr><th></th>'+th+'</tr>';
		for(var i=0;i<r.length;i++){var tr='<th>'+r[i].Title+'</th>';for(var j=1;j<=Cols.length;j++)tr+='<td>'+r[i]['Col'+j]+'</td>';tbl+= '<tr>'+tr+'</tr>'}
		myApp.dom.addHidden(id,'<table id="'+id+'"><tbody>'+tbl+'</tbody></table>')},
	addx:function(r,prefix){for(var i=0;i<r.length;i++){var tableId='tbl'+prefix+r[i].Id;var tr='<tr><th>'+r[i].Title+'</th><td>'+r[i].Total+'</td></tr>';if(!$('table#'+tableId).length)myApp.dom.addHidden(tableId,'<table id="'+tableId+'"><tbody><tr><th>Title</th><th>Items</th></tr></tbody></table>');$('#'+tableId).append(tr)}},
	percByTotal:function(tableId,colIndex,percColIndex){var GTOTAL=myApp.tables.sum(tableId,colIndex);$(tableId+' .tblTotal').text(GTOTAL.format());$(tableId+' tr').each(function(){var TOTAL=+$(this).find('td:nth-child('+colIndex+')').text();$(this).find('td:nth-child('+percColIndex+')').text(((TOTAL*100)/GTOTAL).toFixed(2)+' %')})},
	addByTemplate:function(plh,r,table){myApp.dom.addHidden(table,'<table id="'+table+'">'+$('#'+plh+' table.tbltmplt').html()+'</table>');var $tbl=$('#'+table);$tbl.find('tbody').html($('#'+plh+' .jtmplt').tmpl(r));$('#'+plh+' table.tblDetails').html($tbl.html())},
	total:function(td){var t=0;$('.'+td).each(function(){var v=$(this).text();if(v!='')t+=+v});$('#'+td).text(t)},
	avg:function(td){var t=0;var count=0;$('.'+td).each(function(){var v=$(this).text();if(v!=''){count++;t+=+v}});$('#'+td).text(Math.round((t.toFixed(2)/count.toFixed(2))*100)/100)}
}
myApp.dom={
	addHidden:function(id,html){if(!$('div#plhHiddenz').length)$('body').append('<div id="plhHiddenz" class="hidden"></div>');if(!$('#'+id).length)$('div#plhHiddenz').append(html)},
	add2List:function(id,li){
		var oid='#UL'+id;
		if(!$(oid).length)this.addHidden(this.safeId(oid),'<ul id="'+this.safeId(oid)+'" class="hidden"></ul>');var UL=$(oid);
		var oli=UL.find("li:contains('"+li+"')");
		var i=UL.find('li').index(oli);
		if(i>-1)return i;else {UL.append('<li>'+li+'</li>'); return UL.find('li').index( UL.find("li:contains('"+li+"')") ) }
	},
	safeId:function(id){return id.replace('#','').replace('.','')}
}
myApp.format={
	billion:function(v){return Math.abs(Number(v))>=1.0e+9?(Math.abs(Number(v))/1.0e+9).toLocaleString()+" B":Math.abs(Number(v))>=1.0e+6?(Math.abs(Number(v))/1.0e+6).toFixed(2).toLocaleString()+" M":/*Math.abs(Number(v))>=1.0e+3?(Math.abs(Number(v))/1.0e+3).toFixed(2).toLocaleString()+" K":*/Math.abs(Number(v)).toFixed().toLocaleString()},
	comma:function(v){return v.format()},
	minute2days:function(mn){return (mn/24/60).toFixed()+"d "+(mn/60%24).toFixed()+'h '+(mn%60).toFixed()+'m'}
}
myApp.notify={
	deleted:function(){this.success('Item deleted !!')},
	error:function(){this.failure(' Unable to update !!')},
	success:function(msg){swal('SUCCESS',msg,'success')},
	failure:function(msg){swal('ERROR',msg,'warning')}
}
function ddlBind(url,ddlName){
    myApp.ajax.Exec(url,"{}",function(r){ var title='';   for(var i=0; i<r.length;i++){ title+= '<option value=' + r[i].Id + '>' + r[i].Title + '</option>'  }  $(ddlName).append(title);  }); };

Number.prototype.format=function(e,t){var r="\\d(?=(\\d{"+(t||3)+"})+"+(e>0?"\\.":"$")+")";return this.toFixed(Math.max(0,~~e)).replace(new RegExp(r,"g"),"$&,")};
/*urlParam*/jQuery.fn.urlParam=function(strParamName){var returnVal=new Array();var qString=null;if($(this).attr("href")!="undefined"){var strHref=$(this).attr("href");if(strHref.indexOf("?")>-1){var strQueryString=strHref.substr(strHref.indexOf("?")+1);qString=strQueryString.split("&")}}else{return null}if(qString==null)return null;for(var i=0;i<qString.length;i++){if(escape(unescape(qString[i].split("=")[0]))==strParamName){returnVal.push(qString[i].split("=")[1])}}if(returnVal.length==0)return null;else if(returnVal.length==1)return returnVal[0];else return returnVal};
/*jquery-dateFormat*/var DateFormat={};!function(a){var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=["January","February","March","April","May","June","July","August","September","October","November","December"],f={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},g=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/;a.format=function(){function a(a){return b[parseInt(a,10)]||a}function h(a){return c[parseInt(a,10)]||a}function i(a){var b=parseInt(a,10)-1;return d[b]||a}function j(a){var b=parseInt(a,10)-1;return e[b]||a}function k(a){return f[a]||a}function l(a){var b,c,d,e,f,g=a,h="";return-1!==g.indexOf(".")&&(e=g.split("."),g=e[0],h=e[e.length-1]),f=g.split(":"),3===f.length?(b=f[0],c=f[1],d=f[2].replace(/\s.+/,"").replace(/[a-z]/gi,""),g=g.replace(/\s.+/,"").replace(/[a-z]/gi,""),{time:g,hour:b,minute:c,second:d,millis:h}):{time:"",hour:"",minute:"",second:"",millis:""}}function m(a,b){for(var c=b-String(a).length,d=0;c>d;d++)a="0"+a;return a}return{parseDate:function(a){var b,c,d={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==typeof a)return this.parseDate(new Date(a));if("function"==typeof a.getFullYear)d.year=String(a.getFullYear()),d.month=String(a.getMonth()+1),d.dayOfMonth=String(a.getDate()),d.time=l(a.toTimeString()+"."+a.getMilliseconds());else if(-1!=a.search(g))b=a.split(/[T\+-]/),d.year=b[0],d.month=b[1],d.dayOfMonth=b[2],d.time=l(b[3].split(".")[0]);else switch(b=a.split(" "),6===b.length&&isNaN(b[5])&&(b[b.length]="()"),b.length){case 6:d.year=b[5],d.month=k(b[1]),d.dayOfMonth=b[2],d.time=l(b[3]);break;case 2:c=b[0].split("-"),d.year=c[0],d.month=c[1],d.dayOfMonth=c[2],d.time=l(b[1]);break;case 7:case 9:case 10:d.year=b[3],d.month=k(b[1]),d.dayOfMonth=b[2],d.time=l(b[4]);break;case 1:c=b[0].split(""),d.year=c[0]+c[1]+c[2]+c[3],d.month=c[5]+c[6],d.dayOfMonth=c[8]+c[9],d.time=l(c[13]+c[14]+c[15]+c[16]+c[17]+c[18]+c[19]+c[20]);break;default:return null}return d.date=d.time?new Date(d.year,d.month-1,d.dayOfMonth,d.time.hour,d.time.minute,d.time.second,d.time.millis):new Date(d.year,d.month-1,d.dayOfMonth),d.dayOfWeek=String(d.date.getDay()),d},date:function(b,c){try{var d=this.parseDate(b);if(null===d)return b;for(var e,f=d.year,g=d.month,k=d.dayOfMonth,l=d.dayOfWeek,n=d.time,o="",p="",q="",r=!1,s=0;s<c.length;s++){var t=c.charAt(s),u=c.charAt(s+1);if(r)"'"==t?(p+=""===o?"'":o,o="",r=!1):o+=t;else switch(o+=t,q="",o){case"ddd":p+=a(l),o="";break;case"dd":if("d"===u)break;p+=m(k,2),o="";break;case"d":if("d"===u)break;p+=parseInt(k,10),o="";break;case"D":k=1==k||21==k||31==k?parseInt(k,10)+"st":2==k||22==k?parseInt(k,10)+"nd":3==k||23==k?parseInt(k,10)+"rd":parseInt(k,10)+"th",p+=k,o="";break;case"MMMM":p+=j(g),o="";break;case"MMM":if("M"===u)break;p+=i(g),o="";break;case"MM":if("M"===u)break;p+=m(g,2),o="";break;case"M":if("M"===u)break;p+=parseInt(g,10),o="";break;case"y":case"yyy":if("y"===u)break;p+=o,o="";break;case"yy":if("y"===u)break;p+=String(f).slice(-2),o="";break;case"yyyy":p+=f,o="";break;case"HH":p+=m(n.hour,2),o="";break;case"H":if("H"===u)break;p+=parseInt(n.hour,10),o="";break;case"hh":e=0===parseInt(n.hour,10)?12:n.hour<13?n.hour:n.hour-12,p+=m(e,2),o="";break;case"h":if("h"===u)break;e=0===parseInt(n.hour,10)?12:n.hour<13?n.hour:n.hour-12,p+=parseInt(e,10),o="";break;case"mm":p+=m(n.minute,2),o="";break;case"m":if("m"===u)break;p+=n.minute,o="";break;case"ss":p+=m(n.second.substring(0,2),2),o="";break;case"s":if("s"===u)break;p+=n.second,o="";break;case"S":case"SS":if("S"===u)break;p+=o,o="";break;case"SSS":var v="000"+n.millis.substring(0,3);p+=v.substring(v.length-3),o="";break;case"a":p+=n.hour>=12?"PM":"AM",o="";break;case"p":p+=n.hour>=12?"p.m.":"a.m.",o="";break;case"E":p+=h(l),o="";break;case"'":o="",r=!0;break;default:p+=t,o=""}}return p+=q}catch(w){return console&&console.log&&console.log(w),b}},prettyDate:function(a){var b,c,d;return("string"==typeof a||"number"==typeof a)&&(b=new Date(a)),"object"==typeof a&&(b=new Date(a.toString())),c=((new Date).getTime()-b.getTime())/1e3,d=Math.floor(c/86400),isNaN(d)||0>d?void 0:60>c?"just now":120>c?"1 minute ago":3600>c?Math.floor(c/60)+" minutes ago":7200>c?"1 hour ago":86400>c?Math.floor(c/3600)+" hours ago":1===d?"Yesterday":7>d?d+" days ago":31>d?Math.ceil(d/7)+" weeks ago":d>=31?"more than 5 weeks ago":void 0},toBrowserTimeZone:function(a,b){return this.date(new Date(a),b||"MM/dd/yyyy HH:mm:ss")}}}()}(DateFormat),function(a){a.format=DateFormat.format}(jQuery);
/*jGrowl*/!function(a){a.jGrowl=function(b,c){0===a("#jGrowl").length&&a('<div id="jGrowl"></div>').addClass(c&&c.position?c.position:a.jGrowl.defaults.position).appendTo(c&&c.appendTo?c.appendTo:a.jGrowl.defaults.appendTo),a("#jGrowl").jGrowl(b,c)},a.fn.jGrowl=function(b,c){if(void 0===c&&a.isPlainObject(b)&&(c=b,b=c.message),a.isFunction(this.each)){var d=arguments;return this.each(function(){void 0===a(this).data("jGrowl.instance")&&(a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl,{notifications:[],element:null,interval:null})),a(this).data("jGrowl.instance").startup(this)),a.isFunction(a(this).data("jGrowl.instance")[b])?a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(d).slice(1)):a(this).data("jGrowl.instance").create(b,c)})}},a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",appendTo:"body",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(b,c){var d=a.extend({},this.defaults,c);"undefined"!=typeof d.speed&&(d.openDuration=d.speed,d.closeDuration=d.speed),this.notifications.push({message:b,options:d}),d.log.apply(this.element,[this.element,b,d])},render:function(b){var c=this,d=b.message,e=b.options;e.themeState=""===e.themeState?"":"ui-state-"+e.themeState;var f=a("<div/>").addClass("jGrowl-notification alert "+e.themeState+" ui-corner-all"+(void 0!==e.group&&""!==e.group?" "+e.group:"")).append(a("<button/>").addClass("jGrowl-close").html(e.closeTemplate)).append(a("<div/>").addClass("jGrowl-header").html(e.header)).append(a("<div/>").addClass("jGrowl-message").html(d)).data("jGrowl",e).addClass(e.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return a(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();a(f).bind("mouseover.jGrowl",function(){a(".jGrowl-notification",c.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){a(".jGrowl-notification",c.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){e.beforeOpen.apply(f,[f,d,e,c.element])!==!1&&a(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){e.open.apply(f,[f,d,e,c.element])!==!1&&("after"==e.glue?a(".jGrowl-notification:last",c.element).after(f):a(".jGrowl-notification:first",c.element).before(f),a(this).animate(e.animateOpen,e.openDuration,e.easing,function(){a.support.opacity===!1&&this.style.removeAttribute("filter"),null!==a(this).data("jGrowl")&&"undefined"!=typeof a(this).data("jGrowl")&&(a(this).data("jGrowl").created=new Date),a(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){e.afterOpen.apply(f,[f,d,e,c.element])}).bind("click",function(){e.click.apply(f,[f.message,e,c.element])}).bind("jGrowl.beforeClose",function(){e.beforeClose.apply(f,[f,d,e,c.element])!==!1&&a(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",!0),a(this).animate(e.animateClose,e.closeDuration,e.easing,function(){a.isFunction(e.close)?e.close.apply(f,[f,d,e,c.element])!==!1&&a(this).remove():a(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==e.corners&&void 0!==a.fn.corner&&a(f).corner(e.corners),a(".jGrowl-notification:parent",c.element).length>1&&0===a(".jGrowl-closer",c.element).length&&this.defaults.closer!==!1&&a(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(c.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose"),a.isFunction(c.defaults.closer)&&c.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])})},update:function(){a(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==a(this).data("jGrowl")&&void 0!==a(this).data("jGrowl").created&&a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life,10)<(new Date).getTime()&&a(this).data("jGrowl").sticky!==!0&&(void 0===a(this).data("jGrowl.pause")||a(this).data("jGrowl.pause")!==!0)&&a(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||a(this.element).find(".jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),a(this.element).find(".jGrowl-notification:parent").length<2&&a(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})},startup:function(b){this.element=a(b).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){var c=a(b).data("jGrowl.instance");void 0!==c&&c.update()},parseInt(this.defaults.check,10))},shutdown:function(){a(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){a(this.element).find(".jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}}),a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults}(jQuery);
/*Numeric 1.4.1Sam Collett*/(function($){$.fn.numeric=function(config,callback){if(typeof config==="boolean"){config={decimal:config,negative:true,decimalPlaces:-1}}config=config||{};if(typeof config.negative=="undefined"){config.negative=true}var decimal=config.decimal===false?"":config.decimal||".";var negative=config.negative===true?true:false;var decimalPlaces=typeof config.decimalPlaces=="undefined"?-1:config.decimalPlaces;callback=typeof callback=="function"?callback:function(){};return this.data("numeric.decimal",decimal).data("numeric.negative",negative).data("numeric.callback",callback).data("numeric.decimalPlaces",decimalPlaces).keypress($.fn.numeric.keypress).keyup($.fn.numeric.keyup).blur($.fn.numeric.blur)};$.fn.numeric.keypress=function(e){var decimal=$.data(this,"numeric.decimal");var negative=$.data(this,"numeric.negative");var decimalPlaces=$.data(this,"numeric.decimalPlaces");var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13&&this.nodeName.toLowerCase()=="input"){return true}else if(key==13){return false}var allow=false;if(e.ctrlKey&&key==97||e.ctrlKey&&key==65){return true}if(e.ctrlKey&&key==120||e.ctrlKey&&key==88){return true}if(e.ctrlKey&&key==99||e.ctrlKey&&key==67){return true}if(e.ctrlKey&&key==122||e.ctrlKey&&key==90){return true}if(e.ctrlKey&&key==118||e.ctrlKey&&key==86||e.shiftKey&&key==45){return true}if(key<48||key>57){var value=$(this).val();if($.inArray("-",value.split(""))!==0&&negative&&key==45&&(value.length===0||parseInt($.fn.getSelectionStart(this),10)===0)){return true}if(decimal&&key==decimal.charCodeAt(0)&&$.inArray(decimal,value.split(""))!=-1){allow=false}if(key!=8&&key!=9&&key!=13&&key!=35&&key!=36&&key!=37&&key!=39&&key!=46){allow=false}else{if(typeof e.charCode!="undefined"){if(e.keyCode==e.which&&e.which!==0){allow=true;if(e.which==46){allow=false}}else if(e.keyCode!==0&&e.charCode===0&&e.which===0){allow=true}}}if(decimal&&key==decimal.charCodeAt(0)){if($.inArray(decimal,value.split(""))==-1){allow=true}else{allow=false}}}else{allow=true;if(decimal&&decimalPlaces>0){var dot=$.inArray(decimal,$(this).val().split(""));if(dot>=0&&$(this).val().length>dot+decimalPlaces){allow=false}}}return allow};$.fn.numeric.keyup=function(e){var val=$(this).val();if(val&&val.length>0){var carat=$.fn.getSelectionStart(this);var selectionEnd=$.fn.getSelectionEnd(this);var decimal=$.data(this,"numeric.decimal");var negative=$.data(this,"numeric.negative");var decimalPlaces=$.data(this,"numeric.decimalPlaces");if(decimal!==""&&decimal!==null){var dot=$.inArray(decimal,val.split(""));if(dot===0){this.value="0"+val;carat++;selectionEnd++}if(dot==1&&val.charAt(0)=="-"){this.value="-0"+val.substring(1);carat++;selectionEnd++}val=this.value}var validChars=[0,1,2,3,4,5,6,7,8,9,"-",decimal];var length=val.length;for(var i=length-1;i>=0;i--){var ch=val.charAt(i);if(i!==0&&ch=="-"){val=val.substring(0,i)+val.substring(i+1)}else if(i===0&&!negative&&ch=="-"){val=val.substring(1)}var validChar=false;for(var j=0;j<validChars.length;j++){if(ch==validChars[j]){validChar=true;break}}if(!validChar||ch==" "){val=val.substring(0,i)+val.substring(i+1)}}var firstDecimal=$.inArray(decimal,val.split(""));if(firstDecimal>0){for(var k=length-1;k>firstDecimal;k--){var chch=val.charAt(k);if(chch==decimal){val=val.substring(0,k)+val.substring(k+1)}}}if(decimal&&decimalPlaces>0){var dot=$.inArray(decimal,val.split(""));if(dot>=0){val=val.substring(0,dot+decimalPlaces+1);selectionEnd=Math.min(val.length,selectionEnd)}}this.value=val;$.fn.setSelection(this,[carat,selectionEnd])}};$.fn.numeric.blur=function(){var decimal=$.data(this,"numeric.decimal");var callback=$.data(this,"numeric.callback");var negative=$.data(this,"numeric.negative");var val=this.value;if(val!==""){var re=new RegExp(negative?"-?":""+"^\\d+$|^\\d*"+decimal+"\\d+$");if(!re.exec(val)){callback.apply(this)}}};$.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",$.fn.numeric.keypress).unbind("keyup",$.fn.numeric.keyup).unbind("blur",$.fn.numeric.blur)};$.fn.getSelectionStart=function(o){if(o.type==="number"){return undefined}else if(o.createTextRange&&document.selection){var r=document.selection.createRange().duplicate();r.moveEnd("character",o.value.length);if(r.text=="")return o.value.length;return Math.max(0,o.value.lastIndexOf(r.text))}else{try{return o.selectionStart}catch(e){return 0}}};$.fn.getSelectionEnd=function(o){if(o.type==="number"){return undefined}else if(o.createTextRange&&document.selection){var r=document.selection.createRange().duplicate();r.moveStart("character",-o.value.length);return r.text.length}else return o.selectionEnd};$.fn.setSelection=function(o,p){if(typeof p=="number"){p=[p,p]}if(p&&p.constructor==Array&&p.length==2){if(o.type==="number"){o.focus()}else if(o.createTextRange){var r=o.createTextRange();r.collapse(true);r.moveStart("character",p[0]);r.moveEnd("character",p[1]-p[0]);r.select()}else{o.focus();try{if(o.setSelectionRange){o.setSelectionRange(p[0],p[1])}}catch(e){}}}}})(jQuery);